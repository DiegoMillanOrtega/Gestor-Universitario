<div class="container mx-auto px-4max-w-7xl">
  <div
    class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8"
  >
    <div class="flex flex-wrap gap-3 w-full md:w-auto">
      <p-button
        label="Limpiar"
        icon="pi pi-filter-slash"
        [outlined]="true"
        severity="secondary"
        (click)="limpiarFiltro()"
      />

      <p-select
        [options]="filterStatusOptions"
        optionLabel="label"
        optionValue="value"
        [(ngModel)]="filterStatus"
        placeholder="Estado"
        class="w-full md:w-56"
      >
        <ng-template
          #item
          let-item
        >
          <div class="flex items-center gap-2">
            <p-tag
              [value]="item.label"
              [severity]="item.severity"
              [rounded]="true"
            />
          </div>
        </ng-template>
      </p-select>

      <p-select
        [options]="sortByOptions"
        optionLabel="label"
        optionValue="value"
        [(ngModel)]="sortBy"
        class="w-full md:w-56"
      />
    </div>

    <p-button
      label="Agregar Semestre"
      icon="pi pi-plus"
      severity="primary"
      routerLink="/pages/semestres/agregar"
    />
  </div>

  @if (semestresResource.isLoading()) {
    <div class="flex flex-col items-center justify-center py-20">
      <p-progress-spinner
        styleClass="w-12 h-12"
        strokeWidth="4"
      />
      <p class="mt-4 text-muted-foreground animate-pulse">
        Cargando semestres...
      </p>
    </div>
  } @else {
    @let lista = semestresFiltrados();
    @let original = semestresResource.value() ?? [];

    @if (original.length === 0) {
      <app-empty-state (agregarSemestre)="agregarSemestre()" />
    } @else if (lista.length === 0) {
      <div
        class="flex flex-col items-center py-20 bg-secondary/10 rounded-xl border-2 border-dashed border-border"
      >
        <i class="pi pi-search text-4xl text-muted-foreground mb-4"></i>
        <p class="text-lg font-medium">No hay resultados</p>
        <p class="text-muted-foreground">
          Prueba ajustando los filtros de b√∫squeda
        </p>
      </div>
    } @else {
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-2">
        @for (semestre of lista; track semestre.id) {
          <app-semestre-card
            [semestre]="semestre"
            (onDelete)="eliminarSemestre($event)"
          />
        }
      </div>
    }
  }
</div>
