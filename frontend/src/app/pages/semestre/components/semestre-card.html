<p-card class="group hover:shadow-lg transition-shadow duration-300">
    <ng-template #title>
        <div class="flex items-start justify-between gap-2">
            <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2">
                    <span class="pi pi-fw pi-graduation-cap text-blue-900 dark:text-blue-200 shrink-0 size-4" style="font-size: 1.3rem"></span>
                    <h4 class="text-xl font-semibold text-balance truncate !m-0">{{ semestre().nombre }}</h4>
                </div>
            </div>

            <p-menu #menu [model]="menuItemsOptions" [popup]="true">
                <ng-template #item let-item>
                    <a pRipple class="flex items-center px-3 py-2 cursor-pointer">
                        <span [class]="item.icon"></span>
                        <span [class]="item.linkClass" class="ms-2">{{ item.label }}</span>
                        @if (item.badge) {<p-badge class="ms-auto" [value]="item.badge" />}
                    </a>
                </ng-template>
            </p-menu>
            <p-button (click)="menu.toggle($event)" icon="pi pi-ellipsis-v" [text]="true" severity="secondary"/>
        </div>
    </ng-template>

    <ng-template #subtitle>
        <div class="pb-5">
            <p-badge [class]="statusInfo().className" [value]="statusInfo().label" />
            <!-- <p-badge class="!bg-green-700" value="Activo" /> -->
        </div>
    </ng-template>

    <!-- content -->
    <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3 text-sm">
            <div class="flex items-center gap-2 text-muted-foreground">
                <i class="pi pi-calendar shrink-0 size-4"></i>
                <span class="truncate"> {{ semestre().fechaInicio | date:'MMM yyyy' }} - {{ semestre().fechaFin | date:'MMM yyyy'}} </span>
            </div>
            <div class="flex items-center gap-2 text-muted-foreground">
                <i class="pi pi-book shrink-0"></i>
                <span class="truncate"> {{ semestre().numeroMaterias || 0}} materias · {{ semestre().creditosTotales || 0 }} créditos </span>
            </div>
        </div>

        <div class="space-y-2">
            <div class="flex items-center justify-between text-sm">
                <span>Progreso general</span>
                <span>{{semestre().progreso | number:'1.0-0' }}%</span>
            </div>
            <p-progressbar [value]="semestre().progreso" showValue="false" />
        </div>

        <p-divider />

        <div class="grid grid-cols-2 gap-3">
            <!-- Promedio Actual -->
            <div class="space-y-1">
                <div class="flex items-center gap-1.5 text-xs text-muted-foreground">
                    <i class="pi pi-fw pi-trophy size-3.5"></i>
                    <span>Promedio Actual</span>
                </div>
                <p class="text-2xl font-black text-blue-900 dark:text-blue-200">{{ semestre().promedioActual }}</p>
            </div>

            <!-- Carga Académica -->
            <div class="space-y-1">
                <div class="flex items-center gap-1.5 text-xs text-muted-foreground">
                    <i class="pi pi-fw pi-arrow-up-right size-3.5"></i>
                    <span>Carga Académica</span>
                </div>
                <p class="text-sm font-semibold" [class]="cargaInfo().color" >{{ cargaInfo().label }}</p>
                <!-- <span class="font-bold text-green-700">Carga baja</span> -->
            </div>
        </div>

        <div class="flex items-center justify-between text-xs bg-gray-100 dark:bg-gray-800 rounded-lg p-3">
            <div class="text-center">
                <div class="font-bold text-green-800">{{ semestre().materiasAprobadas || 0 }}</div>
                <div class="text-muted-foreground">Aprobadas</div>
            </div>
            <p-divider layout="vertical"/>
            <div class="text-center">
                <div class="font-bold text-blue-900">{{ semestre().materiasEnCurso || 0 }}</div>
                <div class="text-muted-foreground">En curso</div>  
            </div>
            <p-divider layout="vertical"/>
            <div class="text-center">
                <div class="font-bold text-gray-500">{{ semestre().materiasPendientes || 0 }}</div>
                <div class="text-muted-foreground">Pendientes</div>  
            </div>
        </div>
    </div>
</p-card>
