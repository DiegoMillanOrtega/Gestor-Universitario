<div class="container mx-auto px-4 py-1 max-w-7xl">
    <div class="flex flex-col gap-6 mb-8">
        <div class="flex flex-col justify-between sm:flex-row gap-3">
            <div class="flex flex-col sm:flex-row gap-3">
                <p-iconfield>
                    <p-inputicon class="pi pi-search" />
                    <input
                        type="text"
                        pInputText
                        placeholder="Buscar..."
                        [(ngModel)]="filterInputText" 
                        class="w-full"
                    />
                </p-iconfield>

                <p-button
                    label="Limpiar"
                    [outlined]="true"
                    icon="pi pi-filter-slash"
                    (click)="limpiarFiltro()"
                    severity="secondary"
                />

                <p-select
                    [options]="optionsSemestre()"
                    optionLabel="label"
                    optionValue="value"
                    [(ngModel)]="filterOptionSemestre"
                />
                
                <p-select
                    [options]="optionsEstado"
                    optionLabel="label"
                    optionValue="value"
                    [(ngModel)]="filterOptionEstado" 
                />
            </div>
            
            <p-button
                label="Nueva materia"
                icon="pi pi-plus"
                routerLink="/pages/materias/agregar"
            />
        </div>

        <app-estadisticas-materias
            [total]="resumenFiltrado().total"
            [creditos]="resumenFiltrado().creditos"
            [activas]="resumenFiltrado().activas"
        />

        @if (materiasResource.isLoading()) {
            <div class="text-center py-10">
                <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
            </div>
        } @else {
            @if (materiasFiltradas().length === 0) {
                <p-card>
                   </p-card>
            }

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                @for (materia of materiasFiltradas(); track materia.id) {
                    <app-materia-card
                        [materia]="materia"
                        (editar)="onEditMateria($event)"
                        (verDetalles)="onVerDetalles($event)"
                        (eliminar)="onDeleteMateria($event)"
                    />
                }
            </div>
        }
    </div>
</div>